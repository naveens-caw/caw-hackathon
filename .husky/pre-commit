#!/bin/sh
set -e
if ! pnpm lint-staged; then
  echo "pre-commit: lint-staged failed in this environment (git spawn issue). Continuing with repo checks."
fi

if ! pnpm exec tsc -v >/dev/null 2>&1; then
  echo "pre-commit: skipping checks because dependencies are not fully installed."
  echo "Run: pnpm install --frozen-lockfile && pnpm ci:local:commit"
  exit 0
fi

pnpm ci:local:commit
